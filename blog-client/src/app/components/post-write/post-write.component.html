<div class="write-container">
  <h2>{{ isEditMode ? 'Edit Post' : 'Write New Post' }}</h2>

  <form [formGroup]="postForm" (ngSubmit)="onSubmit()">

    <div class="row" style="margin: 20px 0;">
      <mat-label style="margin-right: 10px; font-weight:bold;">Attachment:</mat-label>
      <input type="file" (change)="onFileSelected($event)">

      <span *ngIf="selectedFile" style="margin-left: 10px; color: green;">
        New: {{ selectedFile.name }}
      </span>

      <div *ngIf="isEditMode && existingFileName && !selectedFile" style="margin-top: 5px; color: #666; font-size: 0.9em;">
        Currently attached: <strong>{{ existingFileName }}</strong>
        (Upload new file to replace)
      </div>
    </div>

    <div class="actions">
      <button mat-button type="button" routerLink="/posts">Cancel</button>
      <button mat-raised-button color="primary" type="submit"
              [disabled]="postForm.invalid || isSubmitting">
        {{ isEditMode ? 'Update' : 'Publish' }}
      </button>
    </div>

  </form>
</div>
